<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>2.2 Instal.lació vsFTPd - Serveis en Xarxa CFGM</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2.2 Instal.laci\u00f3 vsFTPd";
        var mkdocs_page_input_path = "u2-ftp-vsftpd.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Serveis en Xarxa CFGM
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">SERVEIS EN XARXA CFGM</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../u1-conceptes-xarxes/">1. Conceptes sobre xarxes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../exercicis-ipv4/">1.1. Exercicis ipv4</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../u2-servei-ftp.md">2. Servei FTP</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../preguntes-test/">2.1 Preguntes exemple</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">2.2 Instal.lació vsFTPd</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#caracteritiques-de-la-practica">Caracterítiques de la pràctica</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#1-previa">1. Prèvia</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2i3-installacio-i-primera-prova">2i3. Instal·lació i primera prova</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3-copia-de-larxiu-de-configuracio">3. Còpia de l'arxiu de configuració.</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#4-creacio-usuari-anonim">4. Creació usuari anònim.</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#5-creacio-usuari-crud">5. Creació usuari CRUD</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#51-consideracions-dusuaris">5.1 Consideracions d'usuaris</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#6-crear-com-a-sftp">6. Crear com a sftp</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../u3-servei-http.md">3. SERVEI HTTP</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../u3-prt-apache2/">3.1 Practica servidor apache</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../dns/">4. Servei DNS</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../practica-dns.md">4.1 Pràctica servei DNS</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../errors-comuns/">Errors Comuns Apache</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../curriculum/">Curriculum</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../contingut/">Contingut</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Serveis en Xarxa CFGM</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">2.2 Instal.lació vsFTPd</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="installacio-servidor-ftp">INSTAL·LACIÓ SERVIDOR FTP</h1>
<h2 id="caracteritiques-de-la-practica">Caracterítiques de la pràctica</h2>
<p>Volem instal·lar un servidor FTP (File Transfer Protocol) sobre una màquina virtual.</p>
<ol>
<li><strong>Prèvia</strong>: La màquina virtual ja conté el servidor http apache2.</li>
<li><strong>Instal·lació servei</strong>: Instal·lam el servidor vsftpd.</li>
<li><strong>Prova</strong>: Provam l'usuari root del sistema operatiu</li>
<li><strong>Primera configuració</strong>: Cream un usuari anònim</li>
<li><strong>Integram un usuari</strong> "gestorweb" tipus CRUD (create, read, update, delete) sobre la carpeta html d'Apache2.</li>
</ol>
<p><a href="https://www.siteground.es/kb/errores-comunes-ftp/">LINK ERRORS COMUNS</a></p>
<h2 id="1-previa">1. Prèvia</h2>
<p>Abans de començar es molt convenient tenir l'escriptori preparat per poder executar el filezilla i dos CMD.</p>
<p>La nostra màquina virtual ja té una ip de xarxa dins la xarxa local.</p>
<ol>
<li>Sobre un cmd ens conectam a la nostra màquina virtual. </li>
<li>Entram a la carpeta on tenim la màquina.</li>
<li>Feim un vagrant up per posar la màquina en marxa.</li>
<li>Esperam i després ens connectam amb vagrant ssh. </li>
<li>Feim les actualitzacions del apt-get o apt<ul>
<li>sudo apt-get upgrade</li>
<li>sudo apt-get update</li>
<li>Comprovam que no hagi donat missatges d'error</li>
</ul>
</li>
</ol>
<h2 id="2i3-installacio-i-primera-prova">2i3. Instal·lació i primera prova</h2>
<p>Després d'actualitzar el repositori apt ens disposam a fer l'instal·lació del servei FTP.</p>
<ol>
<li>Executam la instal·lació<ul>
<li>sudo apt-get install vsftpd"</li>
</ul>
</li>
<li>Posam en marxa el servidor ftp<ul>
<li>sudo service vsftpd start.</li>
<li>sudo service vsftpd status.</li>
</ul>
</li>
<li>Provam que funciona<ul>
<li>Desde el Filezilla que ja tenim obert posam:<ul>
<li>direcció 10.0.100.x+1 (on x= la teva posició dins l'aula * 10) </li>
<li>usuari: vagrant</li>
<li>password: vagrant</li>
<li>port: 21 (o el deixam per defecte)</li>
</ul>
</li>
<li>Ens avisa de que la connexió no es privada i li donam ok.</li>
</ul>
</li>
</ol>
<p>|El vsftpd utilitza els usuaris del sistema on està allotjat, i en aquest cas, està allotjat a una màquina virtual que té l'usuari vagrant amb el password vagrant.|</p>
<h2 id="3-copia-de-larxiu-de-configuracio">3. Còpia de l'arxiu de configuració.</h2>
<p>La primera tasca és fer una còpia de l'arxiu de configuració que es troba a /etc/vsftpd.conf</p>
<p>El manual de configuració del vsftpd és a <a href="https://security.appspot.com/vsftpd.html">manualWeb</a> i hi podem trobar 
les configuracions bàsiques del servidor.</p>
<p>Per algunes tasques podem fer cerques al web.</p>
<p>Aquest primer exercici ens permet provar amb usuari que no necessita estar creat dins del sistema operatiu del servidor. És l'usuari anonymous.</p>
<pre><code>1. Abans de tocar la configuració del sistema és MOLT CONVENIENT fer una còpia de l'arxiu de configuració inicial del vsftpd

    - sudo cp /etc/vsftpd.conf /etc/vsftpd-conf-default
</code></pre>
<h2 id="4-creacio-usuari-anonim">4. Creació usuari anònim.</h2>
<p>Per activar l'usuari anònim ho feim dins la configuració que trobam a /etc/vsftpd.conf</p>
<p>Editam el document fent servir l'editor nano:</p>
<pre><code>    - sudo nano /etc/vsftpd.conf
</code></pre>
<p>Es fan les proves de funcionament.</p>
<h2 id="5-creacio-usuari-crud">5. Creació usuari CRUD</h2>
<p>Hem de crear un usuari amb privilegis sobre la carpeta d'apache2. Seguim el <a href="https://ca.ubunlog.com/vsftpd-instal%c2%b7lar-un-servidor-ftp-Ubuntu/">tutorial</a></p>
<h3 id="51-consideracions-dusuaris">5.1 Consideracions d'usuaris</h3>
<p>Volem saber com gestiona el SO un usuari. 
Miram el <a href="https://www.hostinger.es/tutoriales/como-ver-usuarios-en-linux#Requisitos_previos_para_ver_usuarios_de_Linux">manual</a> i contestam les preguntes sobre el nostre arxiu html, document de text o paper.
1. Quina instrucció mostra tots els usuaris actius
2. Volem veure la línia que té l'usuari vagrant, quina instrucció empram?
3. Volem veure la línia que té l'usuari gestorweb, quina instrucció empram?
4. Com llistam amb getent? Que fa aquesta instrucció?
5. Som es llisten els grups amb getent?
6. Quines utilitats podem emprar per tenir un GUI del sistema? 
7. Posa la direcció i fes un comentari d'una GUI de les anteriors.
8. Quina opció mostra sols el nom quan llistam usuaris?
9. Podem ordenar alfabeticament els usuaris del sistema?
10. Quins són els quatre consells per gestionar usuaris de forma segura?
11. On podem trobar les carpetes dels usuaris?</p>
<p>Significat de cada línia<a href="https://e-mc2.net/blog/sobre-el-archivo-etcpasswd/">web</a></p>
<p>ENCAPSULACIONS DE DIRECTORI
chroot_local_user=YES #ENCAPSULAM
chroot_local_user=NO #VEIM TOTS ELS DIRECTORIS HOME</p>
<h2 id="6-crear-com-a-sftp">6. Crear com a sftp</h2>
<p>Cercam el punt i seguim el <a href="https://ca.ubunlog.com/vsftpd-instal%c2%b7lar-un-servidor-ftp-Ubuntu/">tutorial</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../preguntes-test/" class="btn btn-neutral float-left" title="2.1 Preguntes exemple"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../u3-prt-apache2/" class="btn btn-neutral float-right" title="3.1 Practica servidor apache">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../preguntes-test/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../u3-prt-apache2/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
